<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Fantasy Team â€” FPL Hub</title>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet"/>
  <style>
    :root{
      --bg:#080c14;--surface:#0e1420;--card:#121a2b;--card2:#172035;
      --border:#1c2d44;--accent:#00d4aa;--blue:#3b82f6;--amber:#f59e0b;
      --danger:#ef4444;--purple:#a855f7;--green:#22c55e;
      --text:#e2e8f0;--muted:#4a5f7a;
      --font-h:'Bebas Neue',sans-serif;
      --font-b:'DM Sans',sans-serif;
      --font-m:'JetBrains Mono',monospace;
    }
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    html{scroll-behavior:smooth}
    body{background:var(--bg);color:var(--text);font-family:var(--font-b);min-height:100vh}

    /* â”€â”€ Team Colors â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    /* Each PL team gets primary+secondary colors */
    :root{
      --ARS:#EF0107;--ARS2:#063672;
      --AVL:#670E36;--AVL2:#95BFE5;
      --BOU:#DA291C;--BOU2:#000000;
      --BRE:#E30613;--BRE2:#FFFFFF;
      --BHA:#0057B8;--BHA2:#FFCD00;
      --CHE:#034694;--CHE2:#FFFFFF;
      --CRY:#1B458F;--CRY2:#C4122E;
      --EVE:#003399;--EVE2:#FFFFFF;
      --FUL:#CC0000;--FUL2:#FFFFFF;
      --IPS:#3A64A3;--IPS2:#FFFFFF;
      --LEI:#003090;--LEI2:#FDBE11;
      --LIV:#C8102E;--LIV2:#F6EB61;
      --MCI:#6CABDD;--MCI2:#FFFFFF;
      --MUN:#DA291C;--MUN2:#FBE122;
      --NEW:#241F20;--NEW2:#41B6E6;
      --NFO:#DD0000;--NFO2:#FFFFFF;
      --SOU:#D71920;--SOU2:#FFFFFF;
      --TOT:#132257;--TOT2:#FFFFFF;
      --WHU:#7A263A;--WHU2:#1BB1E7;
      --WOL:#FDB913;--WOL2:#231F20;
    }

    /* â”€â”€ Navbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    nav{
      position:sticky;top:0;z-index:200;
      display:flex;align-items:center;justify-content:space-between;
      padding:0 1.5rem;height:58px;
      background:rgba(8,12,20,.95);backdrop-filter:blur(20px);
      border-bottom:1px solid var(--border);
    }
    .nav-logo{font-family:var(--font-h);font-size:1.5rem;color:var(--accent);text-decoration:none;letter-spacing:2px}
    .nav-logo span{color:var(--text)}
    .nav-links{display:flex;gap:.2rem;list-style:none}
    .nav-links a{padding:.35rem .8rem;border-radius:6px;text-decoration:none;font-size:.8rem;font-weight:600;color:var(--muted);transition:all .2s}
    .nav-links a:hover{color:var(--text);background:var(--card)}
    .nav-links a.active{color:var(--accent);background:rgba(0,212,170,.08)}

    /* â”€â”€ Page â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .page{max-width:1300px;margin:0 auto;padding:1.5rem}

    /* â”€â”€ ID Section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .id-section{
      background:var(--surface);border:1px solid var(--border);
      border-radius:14px;padding:1.5rem;margin-bottom:1.5rem;
      display:flex;align-items:center;gap:1.5rem;flex-wrap:wrap;
    }
    .id-info{flex:1;min-width:180px}
    .id-info .label{font-family:var(--font-m);font-size:.6rem;letter-spacing:2px;text-transform:uppercase;color:var(--muted);margin-bottom:.3rem}
    .id-info h2{font-family:var(--font-h);font-size:1.5rem;letter-spacing:1px}
    .id-info h2 span{color:var(--accent)}
    .id-info p{font-size:.78rem;color:var(--muted);margin-top:.25rem;line-height:1.5}
    .id-info p code{font-family:var(--font-m);font-size:.7rem;color:var(--accent)}
    .id-form{display:flex;gap:.6rem;align-items:center;flex-wrap:wrap}
    .id-input{
      background:var(--card);border:1px solid var(--border);border-radius:8px;
      padding:.55rem .9rem;color:var(--text);font-family:var(--font-m);font-size:.95rem;
      width:150px;outline:none;transition:border-color .2s;
      -moz-appearance:textfield;
    }
    .id-input::-webkit-inner-spin-button{-webkit-appearance:none}
    .id-input:focus{border-color:var(--accent)}
    .id-input::placeholder{color:var(--muted)}
    .btn-load{background:var(--accent);color:#080c14;border:none;border-radius:8px;padding:.55rem 1.4rem;font-weight:700;font-size:.85rem;cursor:pointer;transition:all .2s;white-space:nowrap}
    .btn-load:hover{background:#00f0c0;transform:translateY(-1px)}
    .btn-load:disabled{opacity:.5;cursor:not-allowed;transform:none}
    .btn-demo{background:transparent;color:var(--muted);border:1px solid var(--border);border-radius:8px;padding:.5rem .9rem;font-size:.78rem;cursor:pointer;transition:all .2s}
    .btn-demo:hover{border-color:var(--amber);color:var(--amber)}

    /* â”€â”€ Status â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .status-bar{
      display:flex;align-items:center;gap:.6rem;
      font-family:var(--font-m);font-size:.7rem;
      padding:.4rem 1rem;border-radius:20px;
      background:var(--card);border:1px solid var(--border);
      width:fit-content;margin-bottom:1.5rem;
    }
    .s-dot{width:7px;height:7px;border-radius:50%;flex-shrink:0}
    .s-dot.idle{background:var(--muted)}
    .s-dot.loading{background:var(--amber);animation:pulse 1s infinite}
    .s-dot.ok{background:var(--accent)}
    .s-dot.error{background:var(--danger)}

    /* â”€â”€ Summary Cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .summary-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:.85rem;margin-bottom:1.5rem}
    .sum-card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1.1rem;text-align:center;position:relative;overflow:hidden}
    .sum-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:var(--c,var(--accent))}
    .sum-val{font-family:var(--font-h);font-size:2rem;letter-spacing:1px;line-height:1;color:var(--c,var(--accent))}
    .sum-key{font-size:.62rem;color:var(--muted);text-transform:uppercase;letter-spacing:1.5px;margin-top:.3rem}
    .sum-card.blue{--c:var(--blue)}.sum-card.amber{--c:var(--amber)}.sum-card.purple{--c:var(--purple)}.sum-card.red{--c:var(--danger)}.sum-card.green2{--c:var(--green)}

    /* â”€â”€ Main Grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .main-grid{display:grid;grid-template-columns:1fr 260px;gap:1rem;margin-bottom:1.5rem}
    @media(max-width:900px){.main-grid{grid-template-columns:1fr}}

    /* â”€â”€ Pitch â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .pitch-wrap{background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden}
    .pitch-header{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.5rem;border-bottom:1px solid var(--border)}
    .pitch-title{font-family:var(--font-h);font-size:1.4rem;letter-spacing:1px}
    .formation-tag{font-family:var(--font-m);font-size:.72rem;padding:.3rem .8rem;border-radius:20px;background:rgba(0,212,170,.1);border:1px solid rgba(0,212,170,.25);color:var(--accent)}

    .pitch{
      background:
        repeating-linear-gradient(
          180deg,
          #0a4a24 0px, #0a4a24 44px,
          #0b5229 44px, #0b5229 88px
        );
      position:relative;
      padding:1rem .5rem;
      display:flex;flex-direction:column;gap:.5rem;
      min-height:480px;
    }
    /* Pitch lines */
    .pitch::before{content:'';position:absolute;left:8%;right:8%;top:50%;height:1px;background:rgba(255,255,255,.07)}
    .pitch::after{content:'';position:absolute;left:50%;top:50%;width:70px;height:70px;border:1px solid rgba(255,255,255,.07);border-radius:50%;transform:translate(-50%,-50%)}
    .pitch-goal-t,.pitch-goal-b{position:absolute;left:33%;right:33%;height:16px;border:1px solid rgba(255,255,255,.1)}
    .pitch-goal-t{top:0;border-top:none}
    .pitch-goal-b{bottom:0;border-bottom:none}

    /* â”€â”€ Player Row â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .player-row{display:flex;justify-content:center;align-items:center;gap:.25rem;flex:1}

    /* â”€â”€ Player Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .player-card{
      display:flex;flex-direction:column;align-items:center;gap:.2rem;
      width:82px;cursor:pointer;position:relative;z-index:2;
    }
    .player-card:hover .jersey-wrap{transform:scale(1.08)}

    /* Jersey SVG wrapper */
    .jersey-wrap{
      width:56px;height:56px;position:relative;
      transition:transform .2s;flex-shrink:0;
    }
    .jersey-svg{width:100%;height:100%}

    /* Captain/VC badge */
    .badge-cap,.badge-vc{
      position:absolute;top:-4px;right:-4px;
      width:17px;height:17px;border-radius:50%;
      font-size:.55rem;font-weight:900;
      display:flex;align-items:center;justify-content:center;
      border:1.5px solid var(--bg);font-family:var(--font-h);
      letter-spacing:0;z-index:3;
    }
    .badge-cap{background:var(--amber);color:#000}
    .badge-vc{background:var(--muted);color:#fff}

    /* Points bubble */
    .pts-bubble{
      position:absolute;bottom:-5px;left:50%;transform:translateX(-50%);
      background:var(--accent);color:#080c14;
      font-family:var(--font-m);font-size:.5rem;font-weight:700;
      padding:1px 5px;border-radius:10px;white-space:nowrap;z-index:3;
    }
    .pts-bubble.cap-pts{background:var(--amber)}

    .player-name-tag{
      font-size:.62rem;font-weight:700;text-align:center;
      color:#fff;text-shadow:0 1px 4px rgba(0,0,0,.9);
      background:rgba(0,0,0,.6);padding:1px 5px;border-radius:4px;
      line-height:1.2;max-width:80px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
    }
    .player-price-tag{font-family:var(--font-m);font-size:.55rem;color:rgba(255,255,255,.55)}

    /* â”€â”€ Bench Panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .bench-panel{background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden;display:flex;flex-direction:column}
    .bench-header{padding:1rem 1.25rem;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
    .bench-title{font-family:var(--font-h);font-size:1.3rem;letter-spacing:1px}
    .bench-tag{font-family:var(--font-m);font-size:.62rem;padding:.25rem .7rem;border-radius:20px;background:rgba(100,116,139,.1);border:1px solid rgba(100,116,139,.2);color:var(--muted)}

    /* Bench players as a horizontal row of 4 */
    .bench-row{
      display:grid;grid-template-columns:repeat(4,1fr);
      gap:.5rem;padding:1rem;flex:1;
    }
    .bench-card{
      display:flex;flex-direction:column;align-items:center;gap:.3rem;
      background:var(--surface);border:1px solid var(--border);
      border-radius:10px;padding:.75rem .4rem;
      cursor:pointer;transition:border-color .2s;
      position:relative;
    }
    .bench-card:hover{border-color:var(--accent)}
    .bench-num{
      position:absolute;top:5px;left:7px;
      font-family:var(--font-m);font-size:.55rem;color:var(--muted);
    }
    .bench-jersey{width:44px;height:44px;flex-shrink:0}
    .bench-name{font-size:.62rem;font-weight:700;text-align:center;line-height:1.2;color:var(--text)}
    .bench-meta{font-family:var(--font-m);font-size:.55rem;color:var(--muted);text-align:center}
    .bench-pts{font-family:var(--font-h);font-size:1.2rem;color:var(--accent);letter-spacing:1px}

    /* Extra bench info below row */
    .bench-extra{padding:.75rem 1rem;border-top:1px solid var(--border)}
    .bench-extra-title{font-family:var(--font-m);font-size:.58rem;color:var(--muted);letter-spacing:1px;text-transform:uppercase;margin-bottom:.5rem}
    .bench-extra-list{display:flex;flex-direction:column;gap:.4rem}
    .bench-extra-item{display:flex;align-items:center;gap:.6rem;padding:.4rem .6rem;background:var(--card2);border-radius:6px}
    .bex-pos{font-family:var(--font-m);font-size:.58rem;padding:.1rem .4rem;border-radius:3px;flex-shrink:0}
    .bex-pos.GKP{background:rgba(250,204,21,.15);color:#facc15}
    .bex-pos.DEF{background:rgba(0,212,170,.15);color:var(--accent)}
    .bex-pos.MID{background:rgba(59,130,246,.15);color:var(--blue)}
    .bex-pos.FWD{background:rgba(239,68,68,.15);color:var(--danger)}
    .bex-name{font-size:.75rem;font-weight:600;flex:1}
    .bex-pts{font-family:var(--font-m);font-size:.72rem;color:var(--accent)}

    /* â”€â”€ Tooltip â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .tooltip-overlay{display:none;position:fixed;inset:0;z-index:500;background:rgba(0,0,0,.65);backdrop-filter:blur(6px);align-items:center;justify-content:center}
    .tooltip-overlay.show{display:flex}
    .tooltip-box{background:var(--card);border:1px solid var(--border);border-radius:18px;padding:2rem;width:340px;max-width:92vw;position:relative}
    .tt-close{position:absolute;top:1rem;right:1rem;background:none;border:none;color:var(--muted);font-size:1.2rem;cursor:pointer;transition:color .2s}
    .tt-close:hover{color:var(--text)}
    .tt-jersey{width:72px;height:72px;margin:0 auto .75rem}
    .tt-pos{font-family:var(--font-m);font-size:.6rem;color:var(--muted);text-align:center;margin-bottom:.3rem}
    .tt-name{font-family:var(--font-h);font-size:1.8rem;letter-spacing:1px;text-align:center;margin-bottom:.15rem}
    .tt-club{font-size:.78rem;color:var(--muted);text-align:center;margin-bottom:1.25rem}
    .tt-grid{display:grid;grid-template-columns:1fr 1fr;gap:.6rem}
    .tt-stat{background:var(--surface);border-radius:8px;padding:.7rem;text-align:center}
    .tt-val{font-family:var(--font-h);font-size:1.5rem;letter-spacing:1px}
    .tt-key{font-size:.6rem;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-top:.2rem}

    /* â”€â”€ Hot Players â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .hot-section{margin-bottom:1.5rem}
    .hot-head{display:flex;align-items:flex-end;justify-content:space-between;margin-bottom:1rem;flex-wrap:wrap;gap:.75rem}
    .section-label{font-family:var(--font-m);font-size:.6rem;letter-spacing:2px;text-transform:uppercase;color:var(--muted);margin-bottom:.3rem}
    .section-title{font-family:var(--font-h);font-size:2rem;letter-spacing:2px;line-height:1}
    .section-title span{color:var(--amber)}
    .hot-tabs{display:flex;gap:.4rem;flex-wrap:wrap}
    .hot-tab{font-family:var(--font-m);font-size:.62rem;letter-spacing:1px;padding:.3rem .75rem;border-radius:20px;cursor:pointer;border:1px solid var(--border);color:var(--muted);background:transparent;transition:all .2s}
    .hot-tab.active{border-color:var(--amber);color:var(--amber);background:rgba(245,158,11,.08)}

    .hot-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:.85rem}
    .hot-card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1.1rem;position:relative;overflow:hidden;transition:all .25s;cursor:pointer}
    .hot-card:hover{border-color:var(--amber);transform:translateY(-3px);box-shadow:0 8px 24px rgba(0,0,0,.3)}
    .hot-rank-bg{position:absolute;top:.75rem;right:.75rem;font-family:var(--font-h);font-size:2.5rem;color:rgba(255,255,255,.04);line-height:1}
    .hot-jersey-sm{width:40px;height:40px;float:left;margin:0 .75rem .25rem 0}
    .hot-pos-tag{font-family:var(--font-m);font-size:.58rem;letter-spacing:1.5px;padding:.12rem .45rem;border-radius:3px;display:inline-block;margin-bottom:.35rem}
    .hot-pos-tag.GKP{background:rgba(250,204,21,.15);color:#facc15}
    .hot-pos-tag.DEF{background:rgba(0,212,170,.15);color:var(--accent)}
    .hot-pos-tag.MID{background:rgba(59,130,246,.15);color:var(--blue)}
    .hot-pos-tag.FWD{background:rgba(239,68,68,.15);color:var(--danger)}
    .hot-name{font-size:.9rem;font-weight:700;margin-bottom:.1rem}
    .hot-club{font-size:.68rem;color:var(--muted);margin-bottom:.75rem;clear:both}
    .hot-stats{display:flex;flex-direction:column;gap:.4rem}
    .hot-stat-row{display:flex;align-items:center;justify-content:space-between;font-size:.72rem}
    .hot-stat-key{color:var(--muted)}
    .hot-stat-val{font-family:var(--font-m);font-weight:700}
    .hot-stat-val.form{color:var(--amber)}
    .hot-stat-val.price{color:var(--accent)}
    .hot-stat-val.own{color:var(--blue)}
    .pc-up{background:rgba(0,212,170,.12);color:var(--accent);font-family:var(--font-m);font-size:.6rem;padding:1px 5px;border-radius:3px}
    .pc-dn{background:rgba(239,68,68,.12);color:var(--danger);font-family:var(--font-m);font-size:.6rem;padding:1px 5px;border-radius:3px}
    .pc-fl{background:rgba(100,116,139,.1);color:var(--muted);font-family:var(--font-m);font-size:.6rem;padding:1px 5px;border-radius:3px}
    .fdr-pip{display:inline-block;width:9px;height:9px;border-radius:2px}
    .fdr-1,.fdr-2{background:var(--accent)}.fdr-3{background:var(--amber)}.fdr-4,.fdr-5{background:var(--danger)}

    /* â”€â”€ Empty â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .empty-pitch{display:flex;flex-direction:column;align-items:center;justify-content:center;flex:1;padding:3rem;color:var(--muted);text-align:center}
    .empty-pitch .ei{font-size:2.5rem;opacity:.4;margin-bottom:.75rem}
    .empty-pitch .et{font-family:var(--font-h);font-size:1.3rem;letter-spacing:1px}

    /* â”€â”€ Animations â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @keyframes pulse{0%,100%{opacity:1}50%{opacity:.3}}
    @keyframes fadeUp{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
    .fade-in{animation:fadeUp .35s ease both}

    ::-webkit-scrollbar{width:4px}
    ::-webkit-scrollbar-track{background:var(--bg)}
    ::-webkit-scrollbar-thumb{background:var(--border);border-radius:2px}
  </style>
</head>
<body>

<!-- â”€â”€ Tooltip â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="tooltip-overlay" id="tooltip" onclick="closeTT(event)">
  <div class="tooltip-box">
    <button class="tt-close" onclick="document.getElementById('tooltip').classList.remove('show')">âœ•</button>
    <svg class="tt-jersey" id="tt-jersey-svg" viewBox="0 0 100 80"></svg>
    <div class="tt-pos" id="tt-pos">MID Â· ARS</div>
    <div class="tt-name" id="tt-name">Player</div>
    <div class="tt-club" id="tt-club">Club Â· Â£0.0m</div>
    <div class="tt-grid">
      <div class="tt-stat"><div class="tt-val" id="tt-gw" style="color:var(--accent)">0</div><div class="tt-key">GW Pts</div></div>
      <div class="tt-stat"><div class="tt-val" id="tt-tot" style="color:var(--blue)">0</div><div class="tt-key">Total Pts</div></div>
      <div class="tt-stat"><div class="tt-val" id="tt-form" style="color:var(--amber)">0.0</div><div class="tt-key">Form</div></div>
      <div class="tt-stat"><div class="tt-val" id="tt-own" style="color:var(--purple)">0%</div><div class="tt-key">Owned By</div></div>
    </div>
  </div>
</div>

<!-- â”€â”€ Navbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<nav>
  <a href="../index.html" class="nav-logo">FPL<span>HUB</span></a>
  <ul class="nav-links">
    <li><a href="../index.html">ğŸ  Home</a></li>
    <li><a href="fantasy.html" class="active">âš¡ Fantasy</a></li>
    <li><a href="predictions.html">ğŸ¯ Predict</a></li>
    <li><a href="watchalong.html">ğŸ“º Watch Along</a></li>
    <li><a href="../overlay.html" target="_blank">ğŸ® OBS</a></li>
  </ul>
</nav>

<div class="page">

  <!-- ID Input -->
  <div class="id-section">
    <div class="id-info">
      <div class="label">// fpl team id</div>
      <h2>LOAD YOUR <span>SQUAD</span></h2>
      <p>FPL Team ID á€›á€¾á€¬á€”á€Šá€ºá€¸: <code>fantasy.premierleague.com â†’ Pick Team â†’ URL /entry/<strong>ID</strong>/</code></p>
    </div>
    <div class="id-form">
      <input type="number" class="id-input" id="teamId" placeholder="e.g. 1234567" min="1"/>
      <button class="btn-load" id="loadBtn" onclick="loadTeam()">LOAD TEAM</button>
      <button class="btn-demo" onclick="loadDemo()">Demo</button>
    </div>
  </div>

  <!-- Status -->
  <div class="status-bar" id="statusBar">
    <div class="s-dot idle" id="sDot"></div>
    <span id="sTxt">Team ID á€‘á€Šá€·á€ºá€•á€¼á€®á€¸ Load Team á€”á€¾á€­á€•á€ºá€•á€«</span>
  </div>

  <!-- Summary -->
  <div class="summary-grid" id="summaryGrid" style="display:none">
    <div class="sum-card"><div class="sum-val" id="s-gw">â€”</div><div class="sum-key">GW Points</div></div>
    <div class="sum-card blue"><div class="sum-val" id="s-tot">â€”</div><div class="sum-key">Total Points</div></div>
    <div class="sum-card amber"><div class="sum-val" id="s-rank">â€”</div><div class="sum-key">Overall Rank</div></div>
    <div class="sum-card purple"><div class="sum-val" id="s-gwn">â€”</div><div class="sum-key">Gameweek</div></div>
    <div class="sum-card red"><div class="sum-val" id="s-tv">â€”</div><div class="sum-key">Team Value</div></div>
    <div class="sum-card green2"><div class="sum-val" id="s-bank">â€”</div><div class="sum-key">In Bank</div></div>
  </div>

  <!-- Main: Pitch + Bench -->
  <div class="main-grid" id="mainGrid" style="display:none">

    <!-- Pitch -->
    <div class="pitch-wrap">
      <div class="pitch-header">
        <div>
          <div style="font-family:var(--font-m);font-size:.58rem;color:var(--muted);letter-spacing:2px;text-transform:uppercase;margin-bottom:.2rem">// Starting XI</div>
          <div class="pitch-title" id="teamNameDisplay">YOUR TEAM</div>
        </div>
        <div class="formation-tag" id="formationDisplay">â€”</div>
      </div>
      <div class="pitch" id="pitchArea">
        <div class="pitch-goal-t"></div>
        <div class="pitch-goal-b"></div>
        <div class="empty-pitch" id="pitchEmpty">
          <div class="ei">âš½</div>
          <div class="et">NO SQUAD LOADED</div>
        </div>
      </div>
    </div>

    <!-- Bench -->
    <div class="bench-panel">
      <div class="bench-header">
        <span class="bench-title">BENCH</span>
        <span class="bench-tag">4 SUBS</span>
      </div>
      <!-- 4 jerseys in a row -->
      <div class="bench-row" id="benchRow"></div>
      <!-- Detail list below -->
      <div class="bench-extra" id="benchExtra">
        <div class="bench-extra-title">Bench Details</div>
        <div class="bench-extra-list" id="benchExtraList"></div>
      </div>
    </div>

  </div>

  <!-- Hot Players -->
  <div class="hot-section" id="hotSection" style="display:none">
    <div class="hot-head">
      <div>
        <div class="section-label">// this gameweek</div>
        <div class="section-title">ğŸ”¥ HOT <span>PLAYERS</span></div>
      </div>
      <div class="hot-tabs">
        <button class="hot-tab active" onclick="sortHot('form',this)">FORM</button>
        <button class="hot-tab" onclick="sortHot('price',this)">PRICE â–²</button>
        <button class="hot-tab" onclick="sortHot('own',this)">OWNERSHIP</button>
        <button class="hot-tab" onclick="sortHot('fdr',this)">EASY FDR</button>
      </div>
    </div>
    <div class="hot-grid" id="hotGrid"></div>
  </div>

</div><!-- /page -->

<footer style="border-top:1px solid var(--border);padding:1.25rem 2rem;text-align:center;font-size:.7rem;color:var(--muted)">
  FPL Hub Â· <a href="../index.html" style="color:var(--accent);text-decoration:none">â† Home</a>
</footer>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  TEAM COLORS â€” Premier League 2024/25
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const TEAM_COLORS = {
  ARS:{p:'#EF0107',s:'#063672',n:'Arsenal'},
  AVL:{p:'#670E36',s:'#95BFE5',n:'Aston Villa'},
  BOU:{p:'#DA291C',s:'#000000',n:'Bournemouth'},
  BRE:{p:'#E30613',s:'#FFFFFF',n:'Brentford'},
  BHA:{p:'#0057B8',s:'#FFCD00',n:'Brighton'},
  CHE:{p:'#034694',s:'#FFFFFF',n:'Chelsea'},
  CRY:{p:'#1B458F',s:'#C4122E',n:'Crystal Palace'},
  EVE:{p:'#003399',s:'#FFFFFF',n:'Everton'},
  FUL:{p:'#CC0000',s:'#FFFFFF',n:'Fulham'},
  IPS:{p:'#3A64A3',s:'#FFFFFF',n:'Ipswich'},
  LEI:{p:'#003090',s:'#FDBE11',n:'Leicester'},
  LIV:{p:'#C8102E',s:'#F6EB61',n:'Liverpool'},
  MCI:{p:'#6CABDD',s:'#FFFFFF',n:'Man City'},
  MUN:{p:'#DA291C',s:'#FBE122',n:'Man United'},
  NEW:{p:'#241F20',s:'#41B6E6',n:'Newcastle'},
  NFO:{p:'#DD0000',s:'#FFFFFF',n:'Nott\'m Forest'},
  SOU:{p:'#D71920',s:'#FFFFFF',n:'Southampton'},
  TOT:{p:'#132257',s:'#FFFFFF',n:'Tottenham'},
  WHU:{p:'#7A263A',s:'#1BB1E7',n:'West Ham'},
  WOL:{p:'#FDB913',s:'#231F20',n:'Wolves'},
};

// FPL team id â†’ short code
const TEAM_SHORT = {
  1:'ARS',2:'AVL',3:'BOU',4:'BRE',5:'BHA',6:'CHE',7:'CRY',8:'EVE',
  9:'FUL',10:'IPS',11:'LEI',12:'LIV',13:'LUT',14:'MCI',15:'MUN',
  16:'NEW',17:'NFO',18:'SHU',19:'SOU',20:'TOT',21:'WHU',22:'WOL'
};
const POS = {1:'GKP',2:'DEF',3:'MID',4:'FWD'};
const PROXIES = ['https://corsproxy.io/?','https://api.allorigins.win/raw?url='];
const FPL = 'https://fantasy.premierleague.com/api';

let allPlayers={}, allTeams={}, hotPlayers=[];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  JERSEY SVG GENERATOR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function jerseyPath(primary, secondary, pos) {
  // Different jersey styles per position
  if (pos === 'GKP') {
    // GK: different collar, solid color
    return `
      <svg viewBox="0 0 100 80" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="jg${pos}" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="${primary}"/>
            <stop offset="100%" stop-color="${primary}dd"/>
          </linearGradient>
        </defs>
        <!-- Body -->
        <path d="M20,12 L10,30 L22,33 L22,72 L78,72 L78,33 L90,30 L80,12 L68,18 Q50,24 32,18 Z"
              fill="url(#jg${pos})" stroke="${secondary}22" stroke-width="1"/>
        <!-- Sleeves -->
        <path d="M20,12 L10,30 L22,33 L22,22 Q20,16 20,12Z" fill="${secondary}44"/>
        <path d="M80,12 L90,30 L78,33 L78,22 Q80,16 80,12Z" fill="${secondary}44"/>
        <!-- Collar round GK -->
        <ellipse cx="50" cy="16" rx="10" ry="5" fill="${secondary}" opacity=".7"/>
        <!-- Horizontal stripe -->
        <rect x="22" y="40" width="56" height="8" fill="${secondary}" opacity=".25"/>
        <!-- Number area -->
        <rect x="38" y="48" width="24" height="14" rx="2" fill="${secondary}" opacity=".15"/>
      </svg>`;
  }
  // Outfield jersey
  return `
    <svg viewBox="0 0 100 80" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="jg${Math.random().toString(36).slice(2)}" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0%" stop-color="${primary}"/>
          <stop offset="100%" stop-color="${primary}cc"/>
        </linearGradient>
      </defs>
      <!-- Body -->
      <path d="M22,10 L10,28 L22,32 L22,72 L78,72 L78,32 L90,28 L78,10 L66,16 Q50,22 34,16 Z"
            fill="${primary}" stroke="${secondary}33" stroke-width="1"/>
      <!-- Left sleeve -->
      <path d="M22,10 L10,28 L22,32 L22,20Z" fill="${secondary}" opacity=".6"/>
      <!-- Right sleeve -->
      <path d="M78,10 L90,28 L78,32 L78,20Z" fill="${secondary}" opacity=".6"/>
      <!-- Collar V-neck -->
      <path d="M42,12 L50,22 L58,12 Q54,10 50,10 Q46,10 42,12Z" fill="${secondary}" opacity=".8"/>
      <!-- Shoulder accent lines -->
      <line x1="22" y1="16" x2="34" y2="16" stroke="${secondary}" stroke-width="1.5" opacity=".5"/>
      <line x1="78" y1="16" x2="66" y2="16" stroke="${secondary}" stroke-width="1.5" opacity=".5"/>
      <!-- Shirt number placeholder -->
      <rect x="40" y="44" width="20" height="16" rx="2" fill="${secondary}" opacity=".18"/>
    </svg>`;
}

function makeJerseySVG(teamShort, pos, size=56) {
  const tc = TEAM_COLORS[teamShort] || {p:'#334155',s:'#94a3b8'};
  return jerseyPath(tc.p, tc.s, pos);
}

function jerseyElement(teamShort, pos, cls='jersey-wrap') {
  const div = document.createElement('div');
  div.className = cls;
  div.innerHTML = makeJerseySVG(teamShort, pos);
  return div;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  STATUS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setStatus(state, msg) {
  document.getElementById('sDot').className = `s-dot ${state}`;
  document.getElementById('sTxt').textContent = msg;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  FETCH WITH PROXY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function fplFetch(path) {
  const url = `${FPL}${path}`;
  for (const p of PROXIES) {
    try {
      const r = await fetch(p + encodeURIComponent(url));
      if (r.ok) return r.json();
    } catch(e) {}
  }
  throw new Error('All proxies failed');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  LOAD BOOTSTRAP
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function loadBootstrap() {
  const data = await fplFetch('/bootstrap-static/');
  data.elements.forEach(p => { allPlayers[p.id] = p; });
  data.teams.forEach(t => { allTeams[t.id] = t; });
  hotPlayers = data.elements
    .filter(p => p.minutes > 90 && parseFloat(p.form) > 0)
    .map(p => ({
      id: p.id, name: p.web_name,
      pos: POS[p.element_type],
      team: TEAM_SHORT[p.team] || 'ARS',
      teamFull: allTeams[p.team]?.name || '',
      form: parseFloat(p.form)||0,
      price: p.now_cost/10,
      priceChange: p.cost_change_event/10,
      own: parseFloat(p.selected_by_percent)||0,
      gwPts: p.event_points||0,
      totalPts: p.total_points||0,
      nextFDR: 3,
    }));
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  LOAD TEAM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function loadTeam() {
  const id = document.getElementById('teamId').value.trim();
  if (!id) { setStatus('error','Team ID á€‘á€Šá€·á€ºá€•á€«'); return; }
  const btn = document.getElementById('loadBtn');
  btn.disabled = true; btn.textContent = 'Loadingâ€¦';
  try {
    setStatus('loading','Player database á€†á€½á€²á€”á€±á€á€Šá€ºâ€¦');
    await loadBootstrap();
    setStatus('loading','Team info á€†á€½á€²á€”á€±á€á€Šá€ºâ€¦');
    const entry = await fplFetch(`/entry/${id}/`);
    const gw = entry.current_event;
    setStatus('loading',`GW${gw} picks á€†á€½á€²á€”á€±á€á€Šá€ºâ€¦`);
    const picks = await fplFetch(`/entry/${id}/event/${gw}/picks/`);
    renderSummary(entry, picks, gw);
    renderPitch(picks.picks, entry.name);
    renderHot('form');
    document.getElementById('summaryGrid').style.display='grid';
    document.getElementById('mainGrid').style.display='grid';
    document.getElementById('hotSection').style.display='block';
    setStatus('ok',`âœ“ ${entry.name} Â· GW${gw} Â· ${picks.entry_history?.points||0}pts loaded`);
    localStorage.setItem('fplTeamId', id);
  } catch(e) {
    setStatus('error',`Failed: ${e.message} â€” Demo Mode á€€á€¼á€­á€¯á€¸á€…á€¬á€¸á€•á€«`);
  } finally {
    btn.disabled=false; btn.textContent='LOAD TEAM';
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RENDER SUMMARY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderSummary(entry, picks, gw) {
  document.getElementById('s-gw').textContent  = picks.entry_history?.points ?? 'â€”';
  document.getElementById('s-tot').textContent = entry.summary_overall_points?.toLocaleString() ?? 'â€”';
  const r = entry.summary_overall_rank;
  document.getElementById('s-rank').textContent = r ? (r>=1000 ? Math.round(r/1000)+'K' : r) : 'â€”';
  document.getElementById('s-gwn').textContent  = `GW${gw}`;
  const tv   = picks.entry_history?.value||0;
  const bank = picks.entry_history?.bank||0;
  document.getElementById('s-tv').textContent   = tv   ? `Â£${(tv/10).toFixed(1)}m`   : 'â€”';
  document.getElementById('s-bank').textContent = bank ? `Â£${(bank/10).toFixed(1)}m` : 'â€”';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RENDER PITCH
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderPitch(picks, teamName) {
  const starters = picks.filter(p=>p.position<=11);
  const bench    = picks.filter(p=>p.position>11).sort((a,b)=>a.position-b.position);

  const defs = starters.filter(p=>POS[allPlayers[p.element]?.element_type]==='DEF').length;
  const mids = starters.filter(p=>POS[allPlayers[p.element]?.element_type]==='MID').length;
  const fwds = starters.filter(p=>POS[allPlayers[p.element]?.element_type]==='FWD').length;
  document.getElementById('formationDisplay').textContent = `${defs}-${mids}-${fwds}`;
  document.getElementById('teamNameDisplay').textContent  = teamName.toUpperCase();

  const rows = {
    FWD: starters.filter(p=>POS[allPlayers[p.element]?.element_type]==='FWD'),
    MID: starters.filter(p=>POS[allPlayers[p.element]?.element_type]==='MID'),
    DEF: starters.filter(p=>POS[allPlayers[p.element]?.element_type]==='DEF'),
    GKP: starters.filter(p=>POS[allPlayers[p.element]?.element_type]==='GKP'),
  };

  const pitch = document.getElementById('pitchArea');
  document.getElementById('pitchEmpty').style.display='none';
  pitch.querySelectorAll('.player-row').forEach(r=>r.remove());

  ['FWD','MID','DEF','GKP'].forEach(pos=>{
    if(!rows[pos].length) return;
    const row = document.createElement('div');
    row.className='player-row';
    rows[pos].forEach(pick=>{
      const pl = allPlayers[pick.element];
      if(!pl) return;
      row.appendChild(makePlayerCard(pl, pick, pos));
    });
    pitch.appendChild(row);
  });

  renderBench(bench);
}

function makePlayerCard(pl, pick, pos) {
  const teamShort = TEAM_SHORT[pl.team] || 'ARS';
  const isCap = pick.is_captain;
  const isVC  = pick.is_vice_captain;
  const pts   = pl.event_points||0;
  const disPts = pts * (pick.multiplier||1);

  const card = document.createElement('div');
  card.className = 'player-card';
  card.onclick = ()=>showTT(pl, pick, teamShort, pos);

  const jerseyWrap = jerseyElement(teamShort, pos);
  // badges
  if(isCap) {
    const b=document.createElement('div'); b.className='badge-cap'; b.textContent='C'; jerseyWrap.appendChild(b);
  }
  if(isVC) {
    const b=document.createElement('div'); b.className='badge-vc'; b.textContent='V'; jerseyWrap.appendChild(b);
  }
  // pts bubble
  const pb=document.createElement('div');
  pb.className='pts-bubble'+(isCap?' cap-pts':'');
  pb.textContent=disPts+'pts';
  jerseyWrap.appendChild(pb);

  card.appendChild(jerseyWrap);

  const nameTag=document.createElement('div'); nameTag.className='player-name-tag'; nameTag.textContent=pl.web_name;
  const priceTag=document.createElement('div'); priceTag.className='player-price-tag'; priceTag.textContent='Â£'+(pl.now_cost/10).toFixed(1)+'m';
  card.appendChild(nameTag);
  card.appendChild(priceTag);
  return card;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RENDER BENCH â€” horizontal row of 4 jerseys
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderBench(bench) {
  const row  = document.getElementById('benchRow');
  const list = document.getElementById('benchExtraList');
  row.innerHTML=''; list.innerHTML='';

  bench.forEach((pick, i)=>{
    const pl = allPlayers[pick.element];
    if(!pl) return;
    const pos = POS[pl.element_type];
    const teamShort = TEAM_SHORT[pl.team]||'ARS';
    const pts = pl.event_points||0;

    // Jersey card
    const card=document.createElement('div');
    card.className='bench-card';
    card.onclick=()=>showTT(pl, pick, teamShort, pos);

    const num=document.createElement('div'); num.className='bench-num'; num.textContent=i+1;
    const jEl=jerseyElement(teamShort, pos,'bench-jersey');
    const nm=document.createElement('div'); nm.className='bench-name'; nm.textContent=pl.web_name;
    const mt=document.createElement('div'); mt.className='bench-meta'; mt.textContent=pos+' Â· '+teamShort;
    const pt=document.createElement('div'); pt.className='bench-pts'; pt.textContent=pts;

    card.appendChild(num); card.appendChild(jEl); card.appendChild(nm); card.appendChild(mt); card.appendChild(pt);
    row.appendChild(card);

    // Extra detail item
    const item=document.createElement('div'); item.className='bench-extra-item';
    item.innerHTML=`
      <span class="bex-pos ${pos}">${pos}</span>
      <span class="bex-name">${pl.web_name} <span style="color:var(--muted);font-size:.65rem">Â· ${teamShort} Â· Â£${(pl.now_cost/10).toFixed(1)}m</span></span>
      <span class="bex-pts">${pts}pts</span>
    `;
    list.appendChild(item);
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  TOOLTIP
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showTT(pl, pick, teamShort, pos) {
  const isCap = pick?.is_captain;
  document.getElementById('tt-pos').textContent  = `${pos} Â· ${teamShort}${isCap?' Â· Â©CAPTAIN':''}`;
  document.getElementById('tt-name').textContent = pl.web_name;
  document.getElementById('tt-club').textContent = `${allTeams[pl.team]?.name||''} Â· Â£${(pl.now_cost/10).toFixed(1)}m`;
  document.getElementById('tt-gw').textContent   = pl.event_points||0;
  document.getElementById('tt-tot').textContent  = pl.total_points||0;
  document.getElementById('tt-form').textContent = pl.form||'â€”';
  document.getElementById('tt-own').textContent  = (pl.selected_by_percent||'â€”')+'%';
  document.getElementById('tt-jersey-svg').innerHTML = makeJerseySVG(teamShort, pos);
  document.getElementById('tooltip').classList.add('show');
}
function closeTT(e){ if(e.target.id==='tooltip') document.getElementById('tooltip').classList.remove('show'); }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  HOT PLAYERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function sortHot(key, btn) {
  document.querySelectorAll('.hot-tab').forEach(t=>t.classList.remove('active'));
  btn.classList.add('active');
  renderHot(key);
}
function renderHot(key) {
  let s=[...hotPlayers];
  if(key==='form')  s.sort((a,b)=>b.form-a.form);
  if(key==='price') s.sort((a,b)=>b.priceChange-a.priceChange);
  if(key==='own')   s.sort((a,b)=>b.own-a.own);
  if(key==='fdr')   s.sort((a,b)=>a.nextFDR-b.nextFDR);
  const top=s.slice(0,8);
  const grid=document.getElementById('hotGrid');
  grid.innerHTML='';
  top.forEach((p,i)=>{
    const pcCls = p.priceChange>0?'pc-up':p.priceChange<0?'pc-dn':'pc-fl';
    const pcTxt = p.priceChange>0?`â–² +Â£${p.priceChange.toFixed(1)}m`:p.priceChange<0?`â–¼ Â£${Math.abs(p.priceChange).toFixed(1)}m`:'= 0';
    const card=document.createElement('div');
    card.className='hot-card fade-in'; card.style.animationDelay=`${i*.05}s`;
    const jerseyHtml=makeJerseySVG(p.team, p.pos);
    card.innerHTML=`
      <div class="hot-rank-bg">${i+1}</div>
      <svg class="hot-jersey-sm" viewBox="0 0 100 80">${jerseyHtml.replace(/<svg[^>]*>/,'').replace('</svg>','')}</svg>
      <span class="hot-pos-tag ${p.pos}">${p.pos}</span>
      <div class="hot-name">${p.name}</div>
      <div class="hot-club">${p.teamFull||p.team}</div>
      <div class="hot-stats">
        <div class="hot-stat-row"><span class="hot-stat-key">Form</span><span class="hot-stat-val form">${p.form.toFixed(1)}</span></div>
        <div class="hot-stat-row"><span class="hot-stat-key">Price</span><span class="hot-stat-val price">Â£${p.price.toFixed(1)}m <span class="${pcCls}">${pcTxt}</span></span></div>
        <div class="hot-stat-row"><span class="hot-stat-key">Owned</span><span class="hot-stat-val own">${p.own.toFixed(1)}%</span></div>
        <div class="hot-stat-row"><span class="hot-stat-key">Next FDR</span><span class="hot-stat-val"><span class="fdr-pip fdr-${p.nextFDR}"></span> ${['','Very Easy','Easy','Medium','Hard','Very Hard'][p.nextFDR]||'â€”'}</span></div>
        <div class="hot-stat-row"><span class="hot-stat-key">GW Pts</span><span class="hot-stat-val" style="color:var(--accent)">${p.gwPts}</span></div>
      </div>`;
    grid.appendChild(card);
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  DEMO MODE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function loadDemo() {
  setStatus('ok','âœ“ Demo Mode');
  document.getElementById('s-gw').textContent   ='43';
  document.getElementById('s-tot').textContent  ='1,453';
  document.getElementById('s-rank').textContent ='1012K';
  document.getElementById('s-gwn').textContent  ='GW26';
  document.getElementById('s-tv').textContent   ='Â£99.0m';
  document.getElementById('s-bank').textContent ='Â£0.4m';
  document.getElementById('summaryGrid').style.display='grid';
  document.getElementById('mainGrid').style.display='grid';
  document.getElementById('hotSection').style.display='block';
  document.getElementById('formationDisplay').textContent='3-4-3';
  document.getElementById('teamNameDisplay').textContent='GANGJA';
  document.getElementById('pitchEmpty').style.display='none';

  const demoSquad = {
    FWD:[
      {name:'JoÃ£o Pedro', team:'BHA', pts:10, price:'Â£7.7m', cap:false, vc:false},
      {name:'GyÃ¶keres',   team:'â€”',   pts:8,  price:'Â£8.6m', cap:false, vc:true},
      {name:'Haaland',    team:'MCI', pts:6,  price:'Â£14.9m',cap:true,  vc:false},
    ],
    MID:[
      {name:'Rogers',   team:'LEI', pts:8,  price:'Â£7.4m', cap:false, vc:false},
      {name:'Rice',     team:'ARS', pts:6,  price:'Â£7.6m', cap:false, vc:false},
      {name:'Enzo',     team:'CHE', pts:4,  price:'Â£6.9m', cap:false, vc:false},
      {name:'Anderson', team:'WHU', pts:2,  price:'Â£5.4m', cap:false, vc:false},
    ],
    DEF:[
      {name:'Guildford',   team:'BHA', pts:7, price:'Â£5.3m', cap:false, vc:false},
      {name:'Van de Ven',  team:'TOT', pts:5, price:'Â£4.6m', cap:false, vc:false},
      {name:'J.Timber',   team:'ARS', pts:5, price:'Â£6.4m', cap:false, vc:false},
    ],
    GKP:[
      {name:'Pickford', team:'EVE', pts:2, price:'Â£5.6m', cap:false, vc:false},
    ],
  };

  const pitch=document.getElementById('pitchArea');
  pitch.querySelectorAll('.player-row').forEach(r=>r.remove());

  ['FWD','MID','DEF','GKP'].forEach(pos=>{
    const row=document.createElement('div'); row.className='player-row';
    demoSquad[pos].forEach(p=>{
      const teamShort = p.team === 'â€”' ? 'MCI' : p.team;
      const card=document.createElement('div'); card.className='player-card';
      card.onclick=()=>{
        document.getElementById('tt-pos').textContent=pos+' Â· '+teamShort;
        document.getElementById('tt-name').textContent=p.name;
        document.getElementById('tt-club').textContent=teamShort+' Â· '+p.price;
        document.getElementById('tt-gw').textContent=p.pts;
        document.getElementById('tt-tot').textContent='â€”';
        document.getElementById('tt-form').textContent='â€”';
        document.getElementById('tt-own').textContent='â€”';
        document.getElementById('tt-jersey-svg').innerHTML=makeJerseySVG(teamShort,pos);
        document.getElementById('tooltip').classList.add('show');
      };
      const jw=jerseyElement(teamShort,pos);
      if(p.cap){const b=document.createElement('div');b.className='badge-cap';b.textContent='C';jw.appendChild(b);}
      if(p.vc){const b=document.createElement('div');b.className='badge-vc';b.textContent='V';jw.appendChild(b);}
      const pb=document.createElement('div');pb.className='pts-bubble'+(p.cap?' cap-pts':'');pb.textContent=(p.cap?p.pts*2:p.pts)+'pts';jw.appendChild(pb);
      card.appendChild(jw);
      const nm=document.createElement('div');nm.className='player-name-tag';nm.textContent=p.name;
      const pr=document.createElement('div');pr.className='player-price-tag';pr.textContent=p.price;
      card.appendChild(nm); card.appendChild(pr);
      row.appendChild(card);
    });
    pitch.appendChild(row);
  });

  // Bench
  const benchData=[
    {name:'Kelleher',    team:'LIV',pts:2,pos:'GKP',price:'Â£4.6m'},
    {name:'Garner',      team:'FUL',pts:2,pos:'MID',price:'Â£5.2m'},
    {name:'Mukiele',     team:'MUN',pts:2,pos:'DEF',price:'Â£4.6m'},
    {name:'Gudmundsson', team:'BHA',pts:0,pos:'DEF',price:'Â£3.8m'},
  ];
  const row=document.getElementById('benchRow');
  const list=document.getElementById('benchExtraList');
  row.innerHTML=''; list.innerHTML='';
  benchData.forEach((p,i)=>{
    const card=document.createElement('div'); card.className='bench-card';
    const num=document.createElement('div');num.className='bench-num';num.textContent=i+1;
    const jEl=jerseyElement(p.team,p.pos,'bench-jersey');
    const nm=document.createElement('div');nm.className='bench-name';nm.textContent=p.name;
    const mt=document.createElement('div');mt.className='bench-meta';mt.textContent=p.pos+' Â· '+p.team;
    const pt=document.createElement('div');pt.className='bench-pts';pt.textContent=p.pts;
    card.appendChild(num);card.appendChild(jEl);card.appendChild(nm);card.appendChild(mt);card.appendChild(pt);
    row.appendChild(card);
    const item=document.createElement('div');item.className='bench-extra-item';
    item.innerHTML=`<span class="bex-pos ${p.pos}">${p.pos}</span><span class="bex-name">${p.name} <span style="color:var(--muted);font-size:.65rem">Â· ${p.team} Â· ${p.price}</span></span><span class="bex-pts">${p.pts}pts</span>`;
    list.appendChild(item);
  });

  // Demo hot players
  hotPlayers=[
    {name:'Salah',    team:'LIV',teamFull:'Liverpool',   pos:'MID',form:9.8,price:13.2,priceChange:.1, own:72.4,gwPts:22,nextFDR:2},
    {name:'Isak',     team:'NEW',teamFull:'Newcastle',   pos:'FWD',form:8.2,price:8.8, priceChange:.2, own:28.1,gwPts:12,nextFDR:1},
    {name:'Palmer',   team:'CHE',teamFull:'Chelsea',     pos:'MID',form:7.6,price:11.5,priceChange:0,  own:51.3,gwPts:10,nextFDR:3},
    {name:'T-Arnold', team:'LIV',teamFull:'Liverpool',   pos:'DEF',form:7.4,price:7.8, priceChange:-.1,own:43.2,gwPts:14,nextFDR:2},
    {name:'Mbeumo',   team:'BRE',teamFull:'Brentford',   pos:'MID',form:7.0,price:7.2, priceChange:.2, own:22.5,gwPts:9, nextFDR:1},
    {name:'Watkins',  team:'AVL',teamFull:'Aston Villa', pos:'FWD',form:6.8,price:8.4, priceChange:0,  own:35.7,gwPts:8, nextFDR:2},
    {name:'Porro',    team:'TOT',teamFull:'Tottenham',   pos:'DEF',form:6.4,price:5.9, priceChange:.1, own:18.9,gwPts:8, nextFDR:3},
    {name:'Flekken',  team:'BRE',teamFull:'Brentford',   pos:'GKP',form:5.8,price:4.5, priceChange:0,  own:12.3,gwPts:6, nextFDR:1},
  ];
  renderHot('form');
}

// â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
window.addEventListener('DOMContentLoaded',()=>{
  const saved=localStorage.getItem('fplTeamId');
  if(saved){ document.getElementById('teamId').value=saved; setStatus('idle',`Last ID: ${saved} â€” Load Team á€”á€¾á€­á€•á€ºá€•á€«`); }
  document.getElementById('teamId').addEventListener('keydown',e=>{ if(e.key==='Enter') loadTeam(); });
});
</script>
</body>
</html>
